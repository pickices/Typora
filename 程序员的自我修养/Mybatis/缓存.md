# 缓存

### 工作机制

- 一个会话查询一条数据，这个数据就会被放在当前会话的一级缓存中
- 如果当前会话关闭了，这个会话对应的一级缓存就没了；但是我们想要的是，会话关闭了，一级缓存中的数据被保存到二级缓存中
- 新的会话查询信息可以从二级缓存中获取内容
- 不同的mappre查出的数据会放在自己对应的缓存(map)中

### 一级缓存

作用域：sqlsession

### 二级缓存

作用域：namespace

在mapper中开启

#### 开启缓存

```xml
<cache/>
```

#### 自定义参数

```xml
<cache
  eviction="FIFO"
  flushInterval="60000"
  size="512"
  readOnly="true"/>
```

### 缓存顺序

先查二级缓存，再查一级缓存

### 小结

- 二级缓存在同一个 Mapper下就有效
- 所有的数据都会先放在一级缓存中
- 只有当会话提交，或者关闭的时候，才会提交到二级缓存中
