# 线程通信

JAVA提供了几个方法解决线程之间的通信问题

|方法名|作用|
|--|--|
|wait()|表示线程一直等待，直到其他线程通知，与sleep不同<br/>，会释放锁|
|wait(long timeout)|指定等待的毫秒数|
|notify()|唤醒一个处于等待状态的线程	|
|notifyAll()|唤醒同一个对象上所有调用wait()方法的线程，优先级<br/>高的线程优先调度|

**注意:均是Obec类的方法，都只能在同步方法或者同步代码块中使用，否则会抛出异常lllegalMonitorStateException**



## 生产者消费者模式

### 管程法

- 生产者：负责生产数据的模块（可能是方法，对象，线程，进程）
- 消费者：负责处理数据的模块（可能是方法，对象，线程，进程）
- 缓冲区：消费者不能直接使用生产者的数据，他们之间有个“缓冲区”
- **生产者将生产好的数据放入缓冲区，消费者从缓冲区拿出数据**

![44146ba44626ced8f22b6fd750d244f6](https://raw.githubusercontent.com/pickices/Typora/master/image/20210614202717.png)



### 信号灯法

判断一个标志位flag，如果为true，就让他等待、如果为false，就让他去通知另外一个人。

把两人衔接起来，就像信号灯红灯停，绿灯行，通过这样一个判断方式，只要来判断什时候让他等待，什么时候将他唤醒、
